{"version":3,"file":"index.mjs","sources":["../../../../../packages/hooks/use-id/index.ts"],"sourcesContent":["import { computed, getCurrentInstance, inject, unref } from 'vue'\nimport { debugWarn, isClient } from '@vuesax-alpha/utils'\nimport { useGlobalConfig } from '../use-global-config'\nimport { defaultNamespace } from '../use-namespace'\n\nimport type { InjectionKey, Ref } from 'vue'\nimport type { MaybeRef } from '@vuesax-alpha/utils'\n\nexport type IdInjectionContext = {\n  prefix: number\n  current: number\n}\n\nconst defaultIdInjection = {\n  prefix: Math.floor(Math.random() * 10000),\n  current: 0,\n}\n\nexport const ID_INJECTION_KEY: InjectionKey<IdInjectionContext> =\n  Symbol('IdInjection')\n\nexport const useIdInjection = (): IdInjectionContext => {\n  return getCurrentInstance()\n    ? inject(ID_INJECTION_KEY, defaultIdInjection)\n    : defaultIdInjection\n}\n\nexport const useId = (deterministicId?: MaybeRef<string>): Ref<string> => {\n  const idInjection = useIdInjection()\n  if (!isClient && idInjection === defaultIdInjection) {\n    debugWarn(\n      'IdInjection',\n      `Looks like you are using server rendering, you must provide a id provider to ensure the hydration process to be succeed\nusage: app.provide(ID_INJECTION_KEY, {\n  prefix: number,\n  current: number,\n})`\n    )\n  }\n\n  const namespace = useGlobalConfig('namespace', defaultNamespace)\n  const idRef = computed(\n    () =>\n      unref(deterministicId) ||\n      `${namespace.value}-id-${idInjection.prefix}-${idInjection.current++}`\n  )\n\n  return idRef\n}\n"],"names":[],"mappings":";;;;;;;AAaA,MAAM,kBAAqB,GAAA;AAAA,EACzB,QAAQ,IAAK,CAAA,KAAA,CAAM,IAAK,CAAA,MAAA,KAAW,GAAK,CAAA;AAAA,EACxC,OAAS,EAAA,CAAA;AACX,CAAA,CAAA;AAEa,MAAA,gBAAA,GACX,OAAO,aAAa,EAAA;AAEf,MAAM,iBAAiB,MAA0B;AACtD,EAAA,OAAO,kBAAmB,EAAA,GACtB,MAAO,CAAA,gBAAA,EAAkB,kBAAkB,CAC3C,GAAA,kBAAA,CAAA;AACN,EAAA;AAEa,MAAA,KAAA,GAAQ,CAAC,eAAoD,KAAA;AACxE,EAAA,MAAM,cAAc,cAAe,EAAA,CAAA;AACnC,EAAI,IAAA,CAAC,QAAY,IAAA,WAAA,KAAgB,kBAAoB,EAAA;AACnD,IAAA,SAAA;AAAA,MACE,aAAA;AAAA,MACA,CAAA;AAAA;AAAA;AAAA;AAAA,EAAA,CAAA;AAAA,KAKF,CAAA;AAAA,GACF;AAEA,EAAM,MAAA,SAAA,GAAY,eAAgB,CAAA,WAAA,EAAa,gBAAgB,CAAA,CAAA;AAC/D,EAAA,MAAM,KAAQ,GAAA,QAAA;AAAA,IACZ,MACE,MAAM,eAAe,CAAA,IACrB,GAAG,SAAU,CAAA,KAAA,CAAA,IAAA,EAAY,WAAY,CAAA,MAAA,CAAA,CAAA,EAAU,WAAY,CAAA,OAAA,EAAA,CAAA,CAAA;AAAA,GAC/D,CAAA;AAEA,EAAO,OAAA,KAAA,CAAA;AACT;;;;"}