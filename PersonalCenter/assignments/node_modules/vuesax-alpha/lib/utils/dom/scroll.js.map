{"version":3,"file":"scroll.js","sources":["../../../../../packages/utils/dom/scroll.ts"],"sourcesContent":["import { isClient } from '../browser'\nimport { getStyle } from './style'\n\nexport const isScroll = (el: HTMLElement, isVertical?: boolean): boolean => {\n  if (!isClient) return false\n\n  const key = (\n    {\n      undefined: 'overflow',\n      true: 'overflow-y',\n      false: 'overflow-x',\n    } as const\n  )[String(isVertical)]!\n  const overflow = getStyle(el, key)\n  return ['scroll', 'auto', 'overlay'].some((s) => overflow.includes(s))\n}\n\nexport const getScrollContainer = (\n  el: HTMLElement,\n  isVertical?: boolean\n): Window | HTMLElement | undefined => {\n  if (!isClient) return\n\n  let parent: HTMLElement = el\n  while (parent) {\n    if ([window, document, document.documentElement].includes(parent))\n      return window\n\n    if (isScroll(parent, isVertical)) return parent\n\n    parent = parent.parentNode as HTMLElement\n  }\n\n  return parent\n}\n\nlet scrollBarWidth: number\nexport const getScrollBarWidth = (namespace: string): number => {\n  if (!isClient) return 0\n  if (scrollBarWidth !== undefined) return scrollBarWidth\n\n  const outer = document.createElement('div')\n  outer.className = `${namespace}-scrollbar__wrap`\n  outer.style.visibility = 'hidden'\n  outer.style.width = '100px'\n  outer.style.position = 'absolute'\n  outer.style.top = '-9999px'\n  document.body.appendChild(outer)\n\n  const widthNoScroll = outer.offsetWidth\n  outer.style.overflow = 'scroll'\n\n  const inner = document.createElement('div')\n  inner.style.width = '100%'\n  outer.appendChild(inner)\n\n  const widthWithScroll = inner.offsetWidth\n  outer.parentNode?.removeChild(outer)\n  scrollBarWidth = widthNoScroll - widthWithScroll\n\n  return scrollBarWidth\n}\n\n/**\n * Scroll with in the container element, positioning the **selected** element at the top\n * of the container\n */\nexport function scrollIntoView(\n  container: HTMLElement,\n  selected: HTMLElement\n): void {\n  if (!isClient) return\n\n  if (!selected) {\n    container.scrollTop = 0\n    return\n  }\n\n  const offsetParents: HTMLElement[] = []\n  let pointer = selected.offsetParent\n  while (\n    pointer !== null &&\n    container !== pointer &&\n    container.contains(pointer)\n  ) {\n    offsetParents.push(pointer as HTMLElement)\n    pointer = (pointer as HTMLElement).offsetParent\n  }\n  const top =\n    selected.offsetTop +\n    offsetParents.reduce((prev, curr) => prev + curr.offsetTop, 0)\n  const bottom = top + selected.offsetHeight\n  const viewRectTop = container.scrollTop\n  const viewRectBottom = viewRectTop + container.clientHeight\n\n  if (top < viewRectTop) {\n    container.scrollTop = top\n  } else if (bottom > viewRectBottom) {\n    container.scrollTop = bottom - container.clientHeight\n  }\n}\n"],"names":["isClient","getStyle"],"mappings":"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"}